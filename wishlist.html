<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home Page</title>
    <link rel="stylesheet" href="css/mystyle-main.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <style>
         .product-card-c {
    background: rgb(255, 255, 255);
    border-radius: 5px;
    border: 2px solid #d8d8d8; 
    padding: 10px;
    margin: 10px;
    width:50%; 
    text-align: left;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0); 
    display: flex;
    justify-content: space-between;
}

.img-rating{
    display: inline;
}
    </style>
</head>

<body>
    <header>
        <table class="header" border="0">
            <tr>
                <td class="logo"><a href="index.html"><img src="images/logov2.png"  alt="e-store"></a></td>
                <td>
                    <div class="search">
                        <input type="text" id="searchInput" placeholder='search...'>
                        <button type="submit" onclick="performSearch()"><img src="images/search-solid.svg" alt="search"></button>
                    </div>
                </td>
               <td>
                <div style="padding-left: 30px; text-align: center; position: relative;">
                    <a href="cart.html">
                        <img src="images/shopping-cart-3.png" alt="CART" style="width: 35px; height: 35px;"><br>
                        Cart <div id="cart-count" class="cart-count" style="display: none;"><script>totalProductsInCart</script></div>
                    </a>
                </div>
                </td>
                <td>
                    <div style="padding-left: 30px; text-align: center; position: relative;">
                        <a href="wishlist.html">
                            <img src="images/like-2.png" alt="wishList" style="width: 35px; height: 35px;"><br>
                            WishList <div id="wishList-count" class="wishList-count" style="display: none;"><script>totalProductsInWishList</script></div>
                        </a>
                    </div>
                </td>
                <td>
                    <div class="sign-in-out"   style="display: flex; align-items: center; justify-content: flex-end; position: relative; width: 100%; margin:auto;">
                        <a href="#" id="avatar-link" style="margin-right: 10px; display: none;">
                            <img src="images/profile.png" alt="my profile" style="height:35px; width:35px;"><br>
                            Account
                        </a>
                        <div class="signin-out">
                            <a href="signin.html" id="signin-link">
                                <img src="images/signin-av.png" alt="sign in"><br>Sign In
                            </a>
                            <div style="display: none; position: absolute; top: 60px; left: -10px; width: 120px;">
                                <button id="signout-button" style="display: flex; align-items: center; background-color: rgb(4, 120, 221); border: none; color: white; border-radius: 5px;">
                                    <h5 style="margin: 0;">Sign Out</h5>
                                    <img src="images/logout.png" alt="sign out" style="width: 35px; height: 35px; margin-left: 5px;">
                                </button>
                            </div>
                        </div>
                    </div>
                </td> 
                <td>
                    <div id="add-product"  style="padding-left: 30px; text-align: center; position: relative; display: none;">
                        <a href="Addproduct.html">
                            <img src="images/add.png" alt="wishList" style="width: 35px; height: 35px;"><br>
                            Add Products
                        </a>
                    </div>
                </td> 
                <td>
                    <div id="delete-product"  style="padding-left: 30px; text-align: center; position: relative; display: none;">
                        <a href="Deleteproduct.html">
                            <img src="images/delete.png" alt="delete product" style="width: 35px; height: 35px;"><br>
                            Delete Products
                        </a>
                    </div>
                </td> 
                <td>
                    <div id="statistics"  style="padding-left: 30px; text-align: center; position: relative; display: none;">
                        <a href="statistics.html">
                            <img src="images/chart.png" alt="delete product" style="width: 35px; height:35px;"><br>
                            Financial Statistics
                        </a>
                    </div>
                </td>            
            </tr>
        </table>
    </header>
    <div class="nav-container">
        <nav>
            <table class="categories" border="0">
                <tr>
                    <td class="c-item"><h4><a href="HA.html">Home Appliances</a></h4></td>
                    <td class="c-item"><h4><a href="TV.html">TV's</a></h4></td>
                    <td class="c-item"><h4><a href="Cameras-category.html">Cameras</a></h4></td>
                    <td class="c-item"><h4><a href="GC-category.html">Games Consoles</a></h4></td>
                </tr>
            </table>
        </nav>
    </div>
    <div class="wishlist-title"><h2>WishList</h2></div>
    
    <div class="cart">
        <div class="cart-container">
            <div id="cart-items"></div>      
        </div>
    </div>
    
    <div id="notification" style="display: none; position: fixed; top: 10px; right: 10px; background: rgba(0, 128, 0, 0.8); color: white; padding: 10px; border-radius: 5px;">Product added to cart!</div>

    <script>
        let totalProductsInCart = parseInt(localStorage.getItem('totalProductsInCart')) || 0;
        let totalProductsInWishList = parseInt(localStorage.getItem('totalProductsInWishList')) || 0;

        const cartProducts = [
        { id: 18, name: 'ONIX VACUUM CLEANER 21 LTR - Powerful 2200W Input', oldPrice: 100, newPrice: 80, imageUrl: 'images/pic/1.png', discount: 20, company: 'Onix', category: 'HomeAppliances', rating: 4.5 },
        {id: 34,name: 'TCL 40 Inch 2K Ultra HD Smart Android LED TV With Free Wall Mount - Frameless Design', oldPrice: 150, newPrice: 112.50,imageUrl: 'images/pic/23.png',discount: 25, company: 'TCL', category: 'TV' , rating: 3 }    
        ];

        function displayProducts(productArray) {
            const productContainer = document.getElementById('cart-items');
            productContainer.innerHTML = ''; // Clear previous products
            
            // Check if the product array is empty
            if (productArray.length === 0) {
                productContainer.innerHTML = `
                    <center>
                        <div>
                            <h1>Your Wishlist is Empty</h1>
                            <br>
                            <button style="padding: 15px 30px; font-size: 23px; background-color: #006eff; color: white; border: none; border-radius: 5px; cursor: pointer;" onclick="window.location.href='index.html'">
                                Start Shopping
                            </button>
                        </div>
                    </center>
                `; // Display message
                return; // Exit the function
            }

            productArray.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card-c';
                productCard.innerHTML = `
                    <div class="img-rating"><img src="${product.imageUrl}" alt="Product ${product.id}" class="product-image" style="width: 150px;"><div class="rating" style="display: flex; align-items: center; margin-top: 10px;">
                            ${generateStars(product.rating)}  <!-- Call the generateStars function here -->
                             </div></div>
                    <div class="cart-product-details">
                        <div class="product-name"><h3>${product.name}</h3></div>
                        <div id="product-price">
                            <p class="old-price">${product.oldPrice.toFixed(2)} SR</p>
                            <p class="new-price">${product.newPrice.toFixed(2)} SR</p>
                            <div class="product-quantity">
                                <button class="remove" onclick="removeFromCart(${product.id})"><i class="fa-solid fa-trash"></i></button>
                                <button class="increase" onclick="addToCart(${product.id})">Add To Cart</button>
                            </div>
                        </div>
                    </div>
                `;
                productContainer.appendChild(productCard);
            });
        }

        function generateStars(rating) {
    const fullStars = Math.floor(rating); // Number of full stars
    const hasHalfStar = rating % 1 !== 0; // Whether there's a half star
    const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0); // Remaining empty stars

    let starsHtml = '';

    // Add full stars
    for (let i = 0; i < fullStars; i++) {
        starsHtml += '<i class="fa-solid fa-star" style="color:gold;"></i>';
    }

    // Add half star if necessary
    if (hasHalfStar) {
        starsHtml += '<i class="fa-solid fa-star-half-alt" style="color: gold;"></i>';
    }

    // Add empty stars
    for (let i = 0; i < emptyStars; i++) {
        starsHtml += '<i class="fa-regular fa-star" style="color: gold;"></i>';
    }

    return starsHtml;
}

        function addToCart(productId) {
            const product = cartProducts.find(item => item.id === productId);
            if (product) {
                // Display notification
                const notification = document.getElementById('notification');
                notification.style.display = 'block';
                notification.innerText = `${product.name} added to cart!`;
                
                // Increment the cart count and update local storage
                totalProductsInCart++;
                localStorage.setItem('totalProductsInCart', totalProductsInCart);
                updateCartCount();

                // Hide notification after 3 seconds
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }
        }

        function removeFromCart(productId) {
            const index = cartProducts.findIndex(item => item.id === productId);
            if (index !== -1) {
                cartProducts.splice(index, 1); // Remove the product from the array
                displayProducts(cartProducts); // Refresh the display
            }
        }

        function updateCartCount() {
            const cartCountDiv = document.getElementById('cart-count');
            cartCountDiv.textContent = totalProductsInCart > 0 ? totalProductsInCart : '';
            cartCountDiv.style.display = totalProductsInCart > 0 ? 'block' : 'none';

            const wishListCountDiv = document.getElementById('wishList-count');
            wishListCountDiv.textContent = totalProductsInWishList > 0 ? totalProductsInWishList : '';
            wishListCountDiv.style.display = totalProductsInWishList > 0 ? 'block' : 'none';
        }

        function updateSignInUI() {
            const avatarLink = document.getElementById('avatar-link');
            const signinLink = document.getElementById('signin-link');

            if (isSignedIn === 'true') {
                avatarLink.style.display = 'block';
                signinLink.style.display = 'none';
                avatarLink.href = 'profile.html';
            } else {
                avatarLink.style.display = 'none';
                signinLink.style.display = 'block';
            }
        }


        document.addEventListener('DOMContentLoaded', function() {
            displayProducts(cartProducts);
            updateCartIcon();
            updateWishlistIcon();
        });
        document.getElementById('avatar-link').addEventListener('click', function(event) {
    event.preventDefault(); // Prevent the default link behavior
    const signoutDiv = document.querySelector('.signin-out div'); // Select the sign-out button's container
    signoutDiv.style.display = signoutDiv.style.display === 'none' ? 'flex' : 'none'; // Toggle visibility
});

// Sign out functionality
document.getElementById('signout-button').addEventListener('click', function() {
    localStorage.setItem('isSignedIn', 'false'); // Update sign-in status
    alert('You have signed out.'); // Alert user
    updateSignInUI(); // Update UI after signing out
    const signoutDiv = document.querySelector('.signout');
    document.getElementById('signout-container').style.display = 'none'; // Hide the sign-out button
});


const isSignedIn = localStorage.getItem('isSignedIn');
    const isAdmin = localStorage.getItem('isAdmin');
    // Reset sign-in status when the page is being unloaded

    // Update UI based on sign-in status
    function updateSignInUI() {
    const isSignedIn = localStorage.getItem('isSignedIn');
    const isAdmin = localStorage.getItem('isAdmin');
    const avatarLink = document.getElementById('avatar-link');
    const signinLink = document.getElementById('signin-link');
    const addIcon = document.getElementById('add-product');
    const deleteIcon = document.getElementById('delete-product');
    const statIcon = document.getElementById('statistics');
    if (isSignedIn === 'true') {

        if(isAdmin === 'true'){
            avatarLink.style.display = 'block'; // Show the avatar
        signinLink.style.display = 'none';   // Hide the sign-in link
        avatarLink.href = 'profile.html';
        addIcon.style.display="block"; 
        deleteIcon.style.display="block";
        statIcon.style.display="block";
        }
        else{
            avatarLink.style.display = 'block'; // Show the avatar
        signinLink.style.display = 'none';   // Hide the sign-in link
        avatarLink.href = 'profile.html';
        }
         // Change to the desired profile page
    } 
    else {
        avatarLink.style.display = 'none';    // Hide the avatar
        signinLink.style.display = 'block';    // Show the sign-in link
    }
}

    // Call the function to update the UI
    updateSignInUI();
        
        // Initialize the counts and display products
        updateCartCount();
        updateSignInUI();
        displayProducts(cartProducts);

        function performSearch() {
            const searchInput = document.getElementById('searchInput').value;
            if (searchInput) {
                // Redirect to search.html with the search term as a query parameter
                window.location.href = `search.html?query=${encodeURIComponent(searchInput)}`;
            } else {
                alert("Please enter a search term.");
            }
        }
    </script>
    
    <footer class="footer">
        <div class="footer-container">
            <!-- Logo Section -->
            <div class="footer-logo">
                <img src="images/logov2.png" height="150px" width="150px" alt="e-store">
            </div>
    
            <!-- Footer Categories -->
            <div class="footer-category">
                <h3>Home Appliances</h3>
                <ul>
                    <li><a href="HA.html">Refrigerators</a></li>
                    <li><a href="HA.html">Washing Machines</a></li>
                    <li><a href="HA.html">Microwaves</a></li>
                    <li><a href="HA.html">Air Conditioners</a></li>
                </ul>
            </div>
    
            <div class="footer-category">
                <h3>TVs</h3>
                <ul>
                    <li><a href="TV.html">Smart TVs</a></li>
                    <li><a href="TV.html">LED TVs</a></li>
                    <li><a href="TV.html">OLED TVs</a></li>
                    <li><a href="TV.html">4K TVs</a></li>
                </ul>
            </div>
    
            <div class="footer-category">
                <h3>Game Consoles</h3>
                <ul>
                    <li><a href="GC-category.html">PlayStation</a></li>
                    <li><a href="GC-category.html">Xbox</a></li>
                    <li><a href="GC-category.html">Nintendo</a></li>
                    <li><a href="GC-category.html">Handheld Consoles</a></li>
                </ul>
            </div>
    
            <div class="footer-category">
                <h3>Cameras</h3>
                <ul>
                    <li><a href="Cameras-category.html">DSLR Cameras</a></li>
                    <li><a href="Cameras-category.html">Mirrorless Cameras</a></li>
                    <li><a href="Cameras-category.html">Action Cameras</a></li>
                    <li><a href="Cameras-category.html">Bridge Cameras</a></li>
                </ul>
            </div>
    
            <!-- Contact and Social Section -->
            <div class="footer-contact">
                <div class="social-media">
                    <h3>Find Us</h3>
                    <a href="https://x.com" target="_blank"><img src="images/social-media/twitter (1).png" alt="X"></a>
                <a href="https://www.facebook.com" target="_blank"><img src="images/social-media/facebook (1).png" alt="Facebook"></a>
                <a href="https://www.tiktok.com" target="_blank"><img src="images/social-media/tik-tok (1).png" alt="TikTok"></a>
                <a href="https://www.instagram.com" target="_blank"><img src="images/social-media/instagram (1).png" alt="Instagram"></a>
                </div>
    
                <h3>Email: <a href="mailto:myEmail@example.com" class="footer-email">myEmail@example.com</a></h3>
                <h3>Call Center: <span class="footer-phone">8521336588</span></h3>
            </div>
    
            <!-- Footer About Us Section -->
            <div class="footer-about">
                <h3>About</h3>
                <ul>
                <li><a href="about-us.html">About Us</a></li>
                </ul>
            </div>
        </div>
       
    </footer>
</body>
</html>




  
   


   
